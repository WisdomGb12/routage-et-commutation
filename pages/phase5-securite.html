<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phase 5 : S√©curit√© et Optimisation - Routage et Commutation</title>
    <meta name="description"
        content="S√©curisez votre r√©seau Cisco : Port Security, DHCP Snooping, DAI, ACLs, SSH et optimisation OSPF.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../styles/main.css">
</head>

<body>
    <header class="header">
        <div class="header-container">
            <a href="../index.html" class="logo">
                <div class="logo-icon"><i class="fas fa-network-wired"></i></div>
                <span>Routage & Commutation</span>
            </a>
            <nav class="nav">
                <a href="../index.html" class="nav-link">Accueil</a>
                <a href="phase1-fondamentaux.html" class="nav-link">Fondamentaux</a>
                <a href="phase2-commutation.html" class="nav-link">Commutation</a>
                <a href="phase3-routage.html" class="nav-link">Routage</a>
                <a href="phase4-inter-vlan.html" class="nav-link">Inter-VLAN</a>
                <a href="phase5-securite.html" class="nav-link active">S√©curit√©</a>
                <a href="phase6-avance.html" class="nav-link">Avanc√©</a>
                <a href="ressources.html" class="nav-link">Ressources</a>
            </nav>
            <div class="header-actions">
                <button class="theme-toggle" aria-label="Changer le th√®me">
                    <svg class="sun-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z" />
                    </svg>
                    <svg class="moon-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z" />
                    </svg>
                </button>
                <button class="mobile-menu-btn" aria-label="Menu">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
    </header>

    <main class="main">
        <div class="container container-narrow">
            <nav class="breadcrumb">
                <a href="../index.html">Accueil</a>
                <span class="breadcrumb-separator">‚Ä∫</span>
                <span class="breadcrumb-current">Phase 5 : S√©curit√©</span>
            </nav>

            <div class="section-header">
                <div class="section-icon"><i class="fas fa-lock"></i></div>
                <div>
                    <span class="phase-badge" style="background: rgba(255, 82, 82, 0.15); color: #ff5252;">Phase
                        5</span>
                    <h1 style="margin-top: 0.5rem;">S√©curit√© et Optimisation</h1>
                </div>

            </div>

            <div class="alert alert-info">
                <div class="alert-icon"><i class="fas fa-clock"></i></div>
                <div class="alert-content">
                    <div class="alert-title">Dur√©e : 3-4 semaines</div>
                    <p style="margin: 0;">S√©curisez votre infrastructure avec Port Security, DHCP Snooping, ACLs, et
                        configurez SSH pour un acc√®s distant s√©curis√©.</p>
                </div>
            </div>

            <!-- Table of Contents -->
            <div class="toc">
                <div class="toc-title"><i class="fas fa-list"></i> Sommaire</div>
                <ul class="toc-list">
                    <li><a href="#port-security">Port Security (rappel approfondi)</a></li>
                    <li><a href="#dhcp-snooping">DHCP Snooping</a></li>
                    <li><a href="#dai">DAI (Dynamic ARP Inspection)</a></li>
                    <li><a href="#acl-standard">ACLs Standard</a></li>
                    <li><a href="#acl-extended">ACLs √âtendues</a></li>
                    <li><a href="#ssh">Configuration SSH</a></li>
                    <li><a href="#ospf-security">S√©curit√© OSPF</a></li>
                    <li><a href="#best-practices">Best Practices</a></li>
                    <li><a href="#labs">Labs Pratiques</a></li>
                    <li><a href="#quiz">Quiz de v√©rification</a></li>
                </ul>
            </div>

            <!-- Section 1: Port Security -->
            <section class="section" id="port-security">
                <h2>Port Security (rappel approfondi)</h2>

                <p>Le <strong>Port Security</strong> limite le nombre d'adresses MAC autoris√©es sur un port et d√©finit
                    l'action en cas de violation. C'est la premi√®re ligne de d√©fense contre les attaques de type
                    <strong>MAC Flooding</strong>.
                </p>

                <h3>Attaque MAC Flooding</h3>
                <p>Un attaquant envoie des milliers de trames avec des adresses MAC al√©atoires. La table MAC (CAM) du
                    switch se remplit et le switch bascule en mode <strong>fail-open</strong>, diffusant toutes les
                    trames comme un hub. L'attaquant peut alors capturer tout le trafic.</p>

                <h3>Configuration compl√®te Port Security</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">Cisco IOS - Port Security complet</span>
                        <button class="code-copy-btn"><i class="fas fa-copy"></i> Copier</button>
                    </div>
                    <pre><code>! Pr√©requis : le port doit √™tre en mode access
interface f0/1
  switchport mode access
  switchport access vlan 10
  
  ! Activer port security
  switchport port-security
  
  ! Maximum d'adresses MAC (par d√©faut: 1)
  switchport port-security maximum 2
  
  ! Mode de violation (protect, restrict, shutdown)
  switchport port-security violation shutdown
  
  ! Apprentissage automatique et sauvegarde (sticky)
  switchport port-security mac-address sticky
  
  ! OU d√©finir une MAC statique
  ! switchport port-security mac-address 0011.2233.4455
  
  ! Aging (optionnel) - expiration des MAC apprises
  switchport port-security aging time 60
  switchport port-security aging type inactivity

! Configuration globale : r√©cup√©ration auto apr√®s violation
errdisable recovery cause psecure-violation
errdisable recovery interval 300</code></pre>
                </div>

                <h3>Modes de violation</h3>
                <table style="width: 100%; border-collapse: collapse; margin: 1rem 0;">
                    <thead>
                        <tr style="background: var(--gradient-primary); color: white;">
                            <th style="padding: 12px; text-align: left;">Mode</th>
                            <th style="padding: 12px; text-align: left;">Action</th>
                            <th style="padding: 12px; text-align: left;">Syslog</th>
                            <th style="padding: 12px; text-align: left;">Compteur</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="background: var(--bg-card);">
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">
                                <strong>protect</strong>
                            </td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">Ignore
                                silencieusement</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">Non</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">Non</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">
                                <strong>restrict</strong>
                            </td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">Ignore + alerte
                            </td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">Oui</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">Oui</td>
                        </tr>
                        <tr style="background: var(--bg-card);">
                            <td style="padding: 12px;"><strong>shutdown</strong> (d√©faut)</td>
                            <td style="padding: 12px;">Port err-disabled</td>
                            <td style="padding: 12px;">Oui</td>
                            <td style="padding: 12px;">Oui</td>
                        </tr>
                    </tbody>
                </table>

                <h3>V√©rification et r√©cup√©ration</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">Cisco IOS - V√©rification Port Security</span>
                        <button class="code-copy-btn">üìã Copier</button>
                    </div>
                    <pre><code>! Afficher le r√©sum√©
show port-security

! D√©tails d'une interface
show port-security interface f0/1

! Voir les adresses apprises
show port-security address

! Voir les ports err-disabled
show interfaces status err-disabled

! R√©activer un port manuellement
interface f0/1
  shutdown
  no shutdown</code></pre>
                </div>
            </section>

            <!-- Section 2: DHCP Snooping -->
            <section class="section" id="dhcp-snooping">
                <h2>DHCP Snooping</h2>

                <p><strong>DHCP Snooping</strong> prot√®ge contre les attaques <strong>Rogue DHCP Server</strong>
                    (serveur DHCP malveillant) et <strong>DHCP Starvation</strong>. Il classe les ports en "trusted" ou
                    "untrusted".</p>

                <h3>Attaques DHCP</h3>
                <ul>
                    <li><strong>Rogue DHCP</strong> : Un attaquant installe un faux serveur DHCP qui distribue des
                        mauvaises IPs ou une fausse gateway pour intercepter le trafic</li>
                    <li><strong>DHCP Starvation</strong> : L'attaquant √©puise le pool d'adresses DHCP en faisant des
                        milliers de requ√™tes avec des MAC al√©atoires</li>
                </ul>

                <h3>Fonctionnement</h3>
                <ul>
                    <li><strong>Ports Trusted</strong> : Peuvent recevoir tous les messages DHCP (serveurs, uplinks)
                    </li>
                    <li><strong>Ports Untrusted</strong> : Seuls les messages clients sont autoris√©s (DISCOVER, REQUEST)
                    </li>
                    <li><strong>DHCP Binding Table</strong> : Associe MAC, IP, VLAN et port pour chaque client</li>
                </ul>

                <h3>Configuration DHCP Snooping</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">Cisco IOS - DHCP Snooping</span>
                        <button class="code-copy-btn">üìã Copier</button>
                    </div>
                    <pre><code>! Activer DHCP Snooping globalement
ip dhcp snooping

! Activer pour des VLANs sp√©cifiques
ip dhcp snooping vlan 10,20,30

! Configurer les ports trusted (serveur DHCP, uplinks)
interface g0/1
  description Vers serveur DHCP
  ip dhcp snooping trust

interface g0/24
  description Uplink vers distribution
  ip dhcp snooping trust

! Les ports access sont untrusted par d√©faut
! Optionnel : limiter le rate DHCP (protection starvation)
interface range f0/1-20
  ip dhcp snooping limit rate 10

! V√©rification
show ip dhcp snooping
show ip dhcp snooping binding</code></pre>
                </div>

                <div class="alert alert-warning">
                    <div class="alert-icon"><i class="fas fa-triangle-exclamation"></i></div>
                    <div class="alert-content">
                        <div class="alert-title">Option 82</div>
                        <p style="margin: 0;">Par d√©faut, DHCP Snooping ins√®re l'Option 82 dans les paquets DHCP. Si
                            votre serveur DHCP ne la supporte pas, d√©sactivez-la avec :
                            <code>no ip dhcp snooping information option</code>
                        </p>
                    </div>
                </div>
            </section>

            <!-- Section 3: DAI -->
            <section class="section" id="dai">
                <h2>DAI (Dynamic ARP Inspection)</h2>

                <p><strong>DAI</strong> prot√®ge contre les attaques <strong>ARP Spoofing</strong> (ou ARP Poisoning). Il
                    v√©rifie que les r√©ponses ARP correspondent √† la table de binding DHCP Snooping.</p>

                <h3>Attaque ARP Spoofing</h3>
                <p>Un attaquant envoie de fausses r√©ponses ARP pour associer son adresse MAC √† l'IP de la gateway. Le
                    trafic des victimes passe alors par l'attaquant (Man-in-the-Middle).</p>

                <h3>Pr√©requis</h3>
                <ul>
                    <li>DHCP Snooping doit √™tre activ√© (DAI utilise la binding table)</li>
                    <li>Pour les IPs statiques, cr√©er des entr√©es ARP ACL manuelles</li>
                </ul>

                <h3>Configuration DAI</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">Cisco IOS - DAI</span>
                        <button class="code-copy-btn"><i class="fas fa-copy"></i> Copier</button>
                    </div>
                    <pre><code>! Pr√©requis : DHCP Snooping actif
ip dhcp snooping
ip dhcp snooping vlan 10,20

! Activer DAI sur les VLANs
ip arp inspection vlan 10,20

! Configurer les ports trusted
interface g0/1
  ip arp inspection trust

! Pour les IPs statiques, cr√©er une ARP ACL
arp access-list SERVEURS-STATIQUES
  permit ip host 192.168.10.100 mac host 0011.2233.4455
  permit ip host 192.168.10.101 mac host 0011.2233.4456

! Appliquer l'ARP ACL au VLAN (en plus de DHCP binding)
ip arp inspection filter SERVEURS-STATIQUES vlan 10

! V√©rification
show ip arp inspection
show ip arp inspection interfaces
show ip arp inspection vlan 10</code></pre>
                </div>

                <h3>Validations additionnelles DAI</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">Cisco IOS - Validations DAI</span>
                        <button class="code-copy-btn">üìã Copier</button>
                    </div>
                    <pre><code>! Activer des v√©rifications suppl√©mentaires
ip arp inspection validate src-mac    ! MAC source dans la trame = MAC dans ARP
ip arp inspection validate dst-mac    ! MAC destination dans la trame = MAC dans ARP
ip arp inspection validate ip         ! Adresses IP valides (pas broadcast, etc.)

! Ou activer toutes les validations
ip arp inspection validate src-mac dst-mac ip</code></pre>
                </div>
            </section>

            <!-- Section 4: ACL Standard -->
            <section class="section" id="acl-standard">
                <h2>ACLs Standard</h2>

                <p>Les <strong>ACLs</strong> (Access Control Lists) filtrent le trafic en autorisant ou refusant des
                    paquets selon certains crit√®res. Les ACLs <strong>standard</strong> ne filtrent que sur
                    l'<strong>adresse IP source</strong>.</p>

                <h3>Caract√©ristiques ACL Standard</h3>
                <ul>
                    <li><strong>Num√©ros</strong> : 1-99 et 1300-1999</li>
                    <li><strong>Crit√®re unique</strong> : Adresse IP source</li>
                    <li><strong>Placement</strong> : Le plus pr√®s possible de la destination</li>
                    <li><strong>Implicit Deny</strong> : Tout ce qui n'est pas explicitement permis est refus√©</li>
                </ul>

                <h3>Configuration ACL Standard num√©rot√©e</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">Cisco IOS - ACL Standard num√©rot√©e</span>
                        <button class="code-copy-btn"><i class="fas fa-copy"></i> Copier</button>
                    </div>
                    <pre><code>! Syntaxe : access-list [num√©ro] {permit|deny} [source] [wildcard]

! Autoriser un h√¥te sp√©cifique
access-list 10 permit host 192.168.1.100

! Autoriser un r√©seau
access-list 10 permit 192.168.1.0 0.0.0.255

! Refuser un r√©seau
access-list 10 deny 10.0.0.0 0.255.255.255

! Permettre tout le reste (sinon implicit deny)
access-list 10 permit any

! Appliquer sur une interface
interface g0/0/0
  ip access-group 10 in   ! Filtrer le trafic entrant
  ! ou
  ip access-group 10 out  ! Filtrer le trafic sortant</code></pre>
                </div>

                <h3>ACL Standard nomm√©e (recommand√©)</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">Cisco IOS - ACL Standard nomm√©e</span>
                        <button class="code-copy-btn">üìã Copier</button>
                    </div>
                    <pre><code>! Cr√©er une ACL nomm√©e
ip access-list standard BLOCK-GUEST
  deny 192.168.50.0 0.0.0.255
  permit any

! Appliquer sur une interface
interface g0/0/1
  ip access-group BLOCK-GUEST in

! Avantages : nom descriptif, possibilit√© d'√©diter les lignes</code></pre>
                </div>

                <h3>Wildcard Masks</h3>
                <p>Le wildcard mask est l'<strong>inverse</strong> du subnet mask. Les bits √† 0 doivent correspondre,
                    les bits √† 1 sont ignor√©s.</p>
                <table style="width: 100%; border-collapse: collapse; margin: 1rem 0;">
                    <thead>
                        <tr style="background: var(--gradient-primary); color: white;">
                            <th style="padding: 12px; text-align: left;">Description</th>
                            <th style="padding: 12px; text-align: left;">Wildcard</th>
                            <th style="padding: 12px; text-align: left;">Exemple</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="background: var(--bg-card);">
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">Un seul h√¥te</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">0.0.0.0</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">
                                <code>host 192.168.1.1</code>
                            </td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">/24</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">0.0.0.255</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">
                                <code>192.168.1.0 0.0.0.255</code>
                            </td>
                        </tr>
                        <tr style="background: var(--bg-card);">
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">/16</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">0.0.255.255</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">
                                <code>172.16.0.0 0.0.255.255</code>
                            </td>
                        </tr>
                        <tr>
                            <td style="padding: 12px;">Toutes les adresses</td>
                            <td style="padding: 12px;">255.255.255.255</td>
                            <td style="padding: 12px;"><code>any</code></td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- Section 5: ACL Extended -->
            <section class="section" id="acl-extended">
                <h2>ACLs √âtendues</h2>

                <p>Les ACLs <strong>√©tendues</strong> permettent un filtrage plus pr√©cis sur multiple crit√®res : IP
                    source, IP destination, protocole, ports source et destination.</p>

                <h3>Caract√©ristiques ACL √âtendue</h3>
                <ul>
                    <li><strong>Num√©ros</strong> : 100-199 et 2000-2699</li>
                    <li><strong>Crit√®res multiples</strong> : Source, destination, protocole, ports</li>
                    <li><strong>Placement</strong> : Le plus pr√®s possible de la source</li>
                    <li><strong>Protocoles</strong> : ip, tcp, udp, icmp, etc.</li>
                </ul>

                <h3>Syntaxe ACL √âtendue</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">Cisco IOS - Syntaxe ACL √©tendue</span>
                        <button class="code-copy-btn"><i class="fas fa-copy"></i> Copier</button>
                    </div>
                    <pre><code>! Syntaxe g√©n√©rale
access-list [100-199] {permit|deny} [protocol] [source] [wildcard] 
  [destination] [wildcard] [eq|gt|lt|range port]

! Permettre HTTP du r√©seau 192.168.10.0 vers n'importe o√π
access-list 110 permit tcp 192.168.10.0 0.0.0.255 any eq 80

! Permettre HTTPS
access-list 110 permit tcp 192.168.10.0 0.0.0.255 any eq 443

! Permettre DNS (TCP et UDP)
access-list 110 permit udp 192.168.10.0 0.0.0.255 any eq 53
access-list 110 permit tcp 192.168.10.0 0.0.0.255 any eq 53

! Permettre ping (ICMP)
access-list 110 permit icmp 192.168.10.0 0.0.0.255 any

! Refuser tout le reste (implicite, mais souvent ajout√© pour clart√©)
access-list 110 deny ip any any

! Appliquer pr√®s de la source
interface g0/0/0
  ip access-group 110 in</code></pre>
                </div>

                <h3>ACL √âtendue nomm√©e</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">Cisco IOS - ACL √âtendue nomm√©e</span>
                        <button class="code-copy-btn">üìã Copier</button>
                    </div>
                    <pre><code>ip access-list extended FILTRAGE-USERS
  ! Permettre web
  permit tcp 192.168.10.0 0.0.0.255 any eq 80
  permit tcp 192.168.10.0 0.0.0.255 any eq 443
  
  ! Permettre email
  permit tcp 192.168.10.0 0.0.0.255 any eq 25
  permit tcp 192.168.10.0 0.0.0.255 any eq 110
  permit tcp 192.168.10.0 0.0.0.255 any eq 143
  
  ! Permettre SSH vers les serveurs
  permit tcp 192.168.10.0 0.0.0.255 192.168.100.0 0.0.0.255 eq 22
  
  ! Bloquer tout le reste
  deny ip any any log

interface g0/0/0
  ip access-group FILTRAGE-USERS in</code></pre>
                </div>

                <h3>Op√©rateurs de ports</h3>
                <ul>
                    <li><strong>eq</strong> : √âgal (eq 80)</li>
                    <li><strong>gt</strong> : Sup√©rieur (gt 1024)</li>
                    <li><strong>lt</strong> : Inf√©rieur (lt 1024)</li>
                    <li><strong>neq</strong> : Diff√©rent (neq 23)</li>
                    <li><strong>range</strong> : Plage (range 20 21)</li>
                </ul>

                <h3>V√©rification ACLs</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">Cisco IOS - V√©rification ACLs</span>
                        <button class="code-copy-btn">üìã Copier</button>
                    </div>
                    <pre><code>! Afficher toutes les ACLs
show access-lists

! Afficher une ACL sp√©cifique
show access-lists 110
show access-lists FILTRAGE-USERS

! Voir o√π les ACLs sont appliqu√©es
show ip interface g0/0/0

! Statistiques de hits (combien de fois chaque r√®gle a match√©)
show access-lists
! Les compteurs montrent les hits

! Effacer les compteurs
clear access-list counters</code></pre>
                </div>
            </section>

            <!-- Section 6: SSH -->
            <section class="section" id="ssh">
                <h2>Configuration SSH</h2>

                <p><strong>SSH</strong> (Secure Shell) remplace Telnet pour l'acc√®s distant s√©curis√©. Telnet transmet
                    tout en clair (y compris les mots de passe), SSH chiffre toute la session.</p>

                <h3>Configuration SSH compl√®te</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">Cisco IOS - Configuration SSH</span>
                        <button class="code-copy-btn"><i class="fas fa-copy"></i> Copier</button>
                    </div>
                    <pre><code>! Pr√©requis 1 : D√©finir un hostname et un domain name
hostname R1
ip domain-name entreprise.local

! Pr√©requis 2 : G√©n√©rer les cl√©s RSA (minimum 1024 bits recommand√©)
crypto key generate rsa modulus 2048

! Activer SSH version 2 (plus s√©curis√©)
ip ssh version 2

! Optionnel : r√©gler le timeout et les tentatives
ip ssh time-out 60
ip ssh authentication-retries 3

! Cr√©er un utilisateur local
username admin privilege 15 secret AdminPass123!
username operator privilege 5 secret OperPass123!

! Configurer les lignes VTY
line vty 0 15
  ! Utiliser l'authentification locale
  login local
  
  ! N'autoriser que SSH (bloquer Telnet)
  transport input ssh
  
  ! Timeout d'inactivit√©
  exec-timeout 10 0

! Optionnel : ACL pour limiter les IPs autoris√©es
ip access-list standard SSH-ALLOWED
  permit 192.168.99.0 0.0.0.255
  deny any log

line vty 0 15
  access-class SSH-ALLOWED in</code></pre>
                </div>

                <h3>V√©rification SSH</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">Cisco IOS - V√©rification SSH</span>
                        <button class="code-copy-btn">üìã Copier</button>
                    </div>
                    <pre><code>! V√©rifier la configuration SSH
show ip ssh

! Voir les sessions SSH actives
show ssh

! V√©rifier les cl√©s
show crypto key mypubkey rsa

! Tester depuis un PC
ssh -l admin 192.168.1.1</code></pre>
                </div>

                <div class="alert alert-danger">
                    <div class="alert-icon"><i class="fas fa-triangle-exclamation"></i></div>
                    <div class="alert-content">
                        <div class="alert-title">D√©sactiver Telnet !</div>
                        <p style="margin: 0;">Telnet transmet tout en clair. Utilisez toujours
                            <code>transport input ssh</code> sur les lignes VTY pour bloquer Telnet.
                        </p>
                    </div>
                </div>
            </section>

            <!-- Section 7: OSPF Security -->
            <section class="section" id="ospf-security">
                <h2>S√©curit√© OSPF</h2>

                <p>OSPF peut √™tre vuln√©rable aux attaques si un routeur malveillant injecte de fausses routes.
                    L'authentification OSPF et les interfaces passives prot√®gent le r√©seau.</p>

                <h3>Interfaces Passives</h3>
                <p>Emp√™che l'envoi/r√©ception de paquets OSPF sur les interfaces vers les utilisateurs finaux.</p>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">Cisco IOS - Interfaces passives</span>
                        <button class="code-copy-btn"><i class="fas fa-copy"></i> Copier</button>
                    </div>
                    <pre><code>router ospf 1
  ! M√©thode 1 : interface par interface
  passive-interface g0/0/0
  passive-interface g0/0/2
  
  ! M√©thode 2 : tout passif par d√©faut, puis exceptions
  passive-interface default
  no passive-interface g0/0/1
  no passive-interface g0/0/3</code></pre>
                </div>

                <h3>Authentification MD5 OSPF</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">Cisco IOS - Authentification OSPF MD5</span>
                        <button class="code-copy-btn">üìã Copier</button>
                    </div>
                    <pre><code>! M√©thode 1 : Par interface
interface g0/0/1
  ip ospf authentication message-digest
  ip ospf message-digest-key 1 md5 SecretKey123

! M√©thode 2 : Par area (tous les routeurs de l'area doivent avoir la m√™me config)
router ospf 1
  area 0 authentication message-digest

interface g0/0/1
  ip ospf message-digest-key 1 md5 SecretKey123

! V√©rification
show ip ospf interface g0/0/1 | include authentication</code></pre>
                </div>
            </section>

            <!-- Section 8: Best Practices -->
            <section class="section" id="best-practices">
                <h2>Best Practices S√©curit√©</h2>

                <h3>Checklist s√©curit√© switch</h3>
                <ul>
                    <li><i class="fas fa-check" style="color: var(--success);"></i> Port Security sur tous les ports
                        access</li>
                    <li><i class="fas fa-check" style="color: var(--success);"></i> DHCP Snooping activ√©</li>
                    <li><i class="fas fa-check" style="color: var(--success);"></i> DAI activ√©</li>
                    <li><i class="fas fa-check" style="color: var(--success);"></i> Ports non utilis√©s : shutdown + VLAN
                        blackhole</li>
                    <li><i class="fas fa-check" style="color: var(--success);"></i> PortFast + BPDU Guard sur les ports
                        access</li>
                    <li><i class="fas fa-check" style="color: var(--success);"></i> VTP mode transparent ou mot de passe
                    </li>
                    <li><i class="fas fa-check" style="color: var(--success);"></i> VLAN natif ‚â† 1</li>
                    <li><i class="fas fa-check" style="color: var(--success);"></i> Trunk : limiter les VLANs autoris√©s
                    </li>
                    <li><i class="fas fa-check" style="color: var(--success);"></i> DTP d√©sactiv√©
                        (<code>switchport nonegotiate</code>)</li>
                </ul>

                <h3>Checklist s√©curit√© routeur</h3>
                <ul>
                    <li><i class="fas fa-check" style="color: var(--success);"></i> SSH activ√©, Telnet d√©sactiv√©</li>
                    <li><i class="fas fa-check" style="color: var(--success);"></i> enable secret (pas enable password)
                    </li>
                    <li><i class="fas fa-check" style="color: var(--success);"></i> service password-encryption</li>
                    <li><i class="fas fa-check" style="color: var(--success);"></i> banner motd avec avertissement l√©gal
                    </li>
                    <li><i class="fas fa-check" style="color: var(--success);"></i> ACL sur les VTY pour limiter l'acc√®s
                    </li>
                    <li><i class="fas fa-check" style="color: var(--success);"></i> OSPF : interfaces passives +
                        authentification</li>
                    <li><i class="fas fa-check" style="color: var(--success);"></i> Timeout sur console et VTY</li>
                    <li><i class="fas fa-check" style="color: var(--success);"></i> Logging activ√© (syslog)</li>
                    <li><i class="fas fa-check" style="color: var(--success);"></i> NTP configur√© pour les horodatages
                    </li>
                </ul>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">Cisco IOS - Template s√©curit√© de base</span>
                        <button class="code-copy-btn"><i class="fas fa-copy"></i> Copier</button>
                    </div>
                    <pre><code>! Template s√©curit√© basique
service password-encryption
no ip http server
no ip http secure-server
no cdp run
ip ssh version 2
login block-for 120 attempts 5 within 60

banner motd ^
************************************************************
*  ATTENTION: Acc√®s r√©serv√© au personnel autoris√©         *
*  Toute activit√© sur ce syst√®me est enregistr√©e          *
*  Tout acc√®s non autoris√© sera poursuivi                 *
************************************************************
^

line con 0
  exec-timeout 5 0
  logging synchronous
  login local

line vty 0 15
  exec-timeout 10 0
  transport input ssh
  login local
  access-class SSH-ALLOWED in</code></pre>
                </div>
            </section>

            <!-- Section 9: Labs -->
            <section class="section" id="labs">
                <h2>Labs Pratiques</h2>

                <div class="card" style="margin-bottom: 1.5rem;">
                    <h3><i class="fas fa-microscope"></i> Lab 1 : Protection compl√®te du switch</h3>
                    <p><strong>Objectif :</strong> Impl√©menter toutes les protections Layer 2</p>
                    <ol>
                        <li>Activer Port Security sur tous les ports access</li>
                        <li>Activer DHCP Snooping</li>
                        <li>Activer DAI</li>
                        <li>D√©sactiver et blackhole les ports non utilis√©s</li>
                        <li>Tester les protections (simuler des attaques)</li>
                    </ol>
                </div>

                <div class="card" style="margin-bottom: 1.5rem;">
                    <h3><i class="fas fa-microscope"></i> Lab 2 : ACLs Standard et √âtendues</h3>
                    <p><strong>Objectif :</strong> Filtrer le trafic entre VLANs</p>
                    <ol>
                        <li>Cr√©er une topologie avec 3 VLANs</li>
                        <li>ACL standard : bloquer le VLAN Guest de tout acc√®s</li>
                        <li>ACL √©tendue : permettre uniquement HTTP/HTTPS du VLAN Users</li>
                        <li>V√©rifier avec les compteurs de hits</li>
                    </ol>
                </div>

                <div class="card" style="margin-bottom: 1.5rem;">
                    <h3><i class="fas fa-microscope"></i> Lab 3 : Configuration SSH</h3>
                    <p><strong>Objectif :</strong> S√©curiser l'acc√®s distant</p>
                    <ol>
                        <li>Configurer SSH sur un routeur</li>
                        <li>Cr√©er plusieurs utilisateurs avec diff√©rents privil√®ges</li>
                        <li>Limiter l'acc√®s SSH √† un sous-r√©seau admin</li>
                        <li>Tester la connexion SSH depuis un PC</li>
                    </ol>
                </div>

                <div class="card" style="margin-bottom: 1.5rem;">
                    <h3><i class="fas fa-microscope"></i> Lab 4 : S√©curit√© OSPF</h3>
                    <p><strong>Objectif :</strong> S√©curiser le protocole de routage</p>
                    <ol>
                        <li>Configurer les interfaces vers les LANs comme passives</li>
                        <li>Activer l'authentification MD5 entre tous les routeurs</li>
                        <li>V√©rifier que l'authentification bloque un routeur non configur√©</li>
                    </ol>
                </div>
            </section>

            <!-- Section 10: Quiz -->
            <section class="section" id="quiz">
                <h2><i class="fas fa-flask"></i> Quiz de v√©rification</h2>
                <div class="card">
                    <p><strong>Question :</strong> Quel est le masque g√©n√©rique (wildcard mask) pour un masque de
                        sous-r√©seau /8 (255.0.0.0) ?</p>
                    <details>
                        <summary class="btn btn-primary"
                            style="display: inline-block; cursor: pointer; margin-bottom: 0.5rem;">Voir la r√©ponse
                        </summary>
                        <p
                            style="margin-top: 0.5rem; padding: 1rem; background: var(--bg-primary); border-radius: 8px;">
                            <strong>0.255.255.255</strong>. C'est l'inverse du masque 255.0.0.0 (/8).
                        </p>
                    </details>
                </div>
            </section>

            <!-- Planning -->
            <section class="section">
                <h2>Planning Sugg√©r√©</h2>
                <div class="timeline">
                    <div class="timeline-item">
                        <div class="timeline-title">Semaine 1 : S√©curit√© Layer 2</div>
                        <div class="timeline-content">Port Security + DHCP Snooping + DAI + Labs</div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-title">Semaine 2 : ACLs</div>
                        <div class="timeline-content">ACLs Standard + √âtendues + Wildcards + Labs filtrage</div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-title">Semaine 3 : Acc√®s distant et OSPF</div>
                        <div class="timeline-content">SSH + Authentification OSPF + Best practices</div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-title">Semaine 4 : Lab int√©gr√©</div>
                        <div class="timeline-content">Projet complet combinant toutes les s√©curit√©s</div>
                    </div>
                </div>
            </section>

            <!-- Page Navigation -->

            <!-- Completion Section -->
            <div class="completion-section"
                style="margin: 4rem 0; padding: 2rem; background: var(--bg-card); border-radius: var(--radius-lg); border: 1px solid var(--border-color); text-align: center;">
                <h3 style="margin-bottom: 1rem;">La phase est termin√©e ?</h3>
                <p style="margin-bottom: 2rem; color: var(--text-secondary);">Marquez cette phase comme termin√©e pour
                    suivre votre progression globale.</p>
                <button class="mark-complete-btn" data-phase="phase5"
                    style="margin: 0 auto; width: auto; font-size: 1.1rem; padding: 0.75rem 2rem;">Marquer la phase
                    comme termin√©e</button>
            </div>

            <nav class="page-nav">
                <a href="phase4-inter-vlan.html" class="page-nav-link prev">
                    <span>‚Üê</span>
                    <div>
                        <div class="page-nav-label">Pr√©c√©dent</div>
                        <div class="page-nav-title">Phase 4 : Inter-VLAN</div>
                    </div>
                </a>
                <a href="phase6-avance.html" class="page-nav-link">
                    <div>
                        <div class="page-nav-label">Suivant</div>
                        <div class="page-nav-title">Phase 6 : Avanc√©</div>
                    </div>
                    <span>‚Üí</span>
                </a>
            </nav>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-content">
            <p class="footer-text">Programme de Formation en Routage et Commutation ‚Ä¢ Pr√©paration CCNA 200-301</p>
        </div>
    </footer>
    <script src="../js/quiz_data.js"></script>
    <script src="../js/quiz.js"></script>
    <script src="../js/main.js"></script>
</body>

</html>