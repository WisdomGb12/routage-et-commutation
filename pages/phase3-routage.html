<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phase 3 : Routage - Routage et Commutation</title>
    <meta name="description"
        content="Apprenez le routage Cisco : routes statiques, OSPF single-area, tables de routage et troubleshooting.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../styles/main.css">
</head>

<body>
    <header class="header">
        <div class="header-container">
            <a href="../index.html" class="logo">
                <div class="logo-icon"><i class="fas fa-network-wired"></i></div>
                <span>Routage & Commutation</span>
            </a>
            <nav class="nav">
                <a href="../index.html" class="nav-link">Accueil</a>
                <a href="phase1-fondamentaux.html" class="nav-link">Fondamentaux</a>
                <a href="phase2-commutation.html" class="nav-link">Commutation</a>
                <a href="phase3-routage.html" class="nav-link active">Routage</a>
                <a href="phase4-inter-vlan.html" class="nav-link">Inter-VLAN</a>
                <a href="phase5-securite.html" class="nav-link">Sécurité</a>
                <a href="phase6-avance.html" class="nav-link">Avancé</a>
                <div class="nav-item">
                    <a href="ressources.html" class="nav-link">
                        Ressources <i class="fas fa-chevron-down" style="font-size: 0.7rem;"></i>
                    </a>
                    <div class="dropdown-menu">
                        <a href="projets.html" class="dropdown-item">
                            <i class="fas fa-project-diagram"></i> Projets
                        </a>
                        <a href="ccna.html" class="dropdown-item">
                            <i class="fas fa-graduation-cap"></i> CCNA
                        </a>
                        <a href="ressources.html" class="dropdown-item">
                            <i class="fas fa-book"></i> Voir tout
                        </a>
                    </div>
                </div>
            </nav>
            <div class="header-actions">
                <button class="theme-toggle" aria-label="Changer le thème">
                    <svg class="sun-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z" />
                    </svg>
                    <svg class="moon-icon" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z" />
                    </svg>
                </button>
                <button class="mobile-menu-btn" aria-label="Menu">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
    </header>

    <main class="main">
        <div class="container container-narrow">
            <nav class="breadcrumb">
                <a href="../index.html">Accueil</a>
                <span class="breadcrumb-separator">›</span>
                <span class="breadcrumb-current">Phase 3 : Routage</span>
            </nav>

            <div class="section-header">
                <div class="section-icon"><i class="fas fa-route"></i></div>
                <div>
                    <span class="phase-badge" style="background: rgba(0, 200, 83, 0.15); color: #00c853;">Phase 3</span>
                    <h1 style="margin-top: 0.5rem;">Routage Statique et Dynamique</h1>
                </div>

            </div>

            <div class="alert alert-info">
                <div class="alert-icon"><i class="fas fa-clock"></i></div>
                <div class="alert-content">
                    <div class="alert-title">Durée : 4-5 semaines</div>
                    <p style="margin: 0;">Maîtrisez le routage statique et le protocole OSPF single-area. C'est l'une
                        des compétences les plus importantes pour le CCNA.</p>
                </div>
            </div>

            <!-- Table of Contents -->
            <div class="toc">
                <div class="toc-title"><i class="fas fa-list"></i> Sommaire</div>
                <ul class="toc-list">
                    <li><a href="#introduction">Introduction au Routage</a></li>
                    <li><a href="#table-routage">Table de Routage</a></li>
                    <li><a href="#routage-statique">Routage Statique</a></li>
                    <li><a href="#ospf-concepts">OSPF : Concepts</a></li>
                    <li><a href="#ospf-config">OSPF : Configuration</a></li>
                    <li><a href="#ospf-verification">OSPF : Vérification</a></li>
                    <li><a href="#troubleshooting">Troubleshooting</a></li>
                    <li><a href="#labs">Labs Pratiques</a></li>
                    <li><a href="#quiz">Quiz de vérification</a></li>
                </ul>
            </div>

            <!-- Section 1: Introduction -->
            <section class="section" id="introduction">
                <h2>Introduction au Routage</h2>

                <p>Le <strong>routage</strong> est le processus par lequel un routeur détermine le <strong>meilleur
                        chemin</strong> pour acheminer un paquet de sa source vers sa destination. C'est une fonction de
                    la <strong>couche 3</strong> (Réseau) du modèle OSI.</p>

                <h3>Rôle du Routeur</h3>
                <ul>
                    <li><strong>Interconnecter les réseaux</strong> : Connecte des réseaux différents (ex: LAN ↔ WAN)
                    </li>
                    <li><strong>Prendre des décisions de routage</strong> : Utilise la table de routage pour déterminer
                        le next-hop</li>
                    <li><strong>Segmenter les domaines de broadcast</strong> : Chaque interface est un domaine de
                        broadcast séparé</li>
                    <li><strong>Filtrer le trafic</strong> : Peut appliquer des ACLs pour la sécurité</li>
                </ul>

                <h3>Configuration de Base du Routeur</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">Cisco IOS - Configuration initiale routeur</span>
                        <button class="code-copy-btn"><i class="fas fa-copy"></i> Copier</button>
                    </div>
                    <pre><code>! Configuration de base
enable
configure terminal
hostname R1
no ip domain-lookup
enable secret class

! Configuration console
line console 0
  password cisco
  login
  logging synchronous

! Configuration VTY
line vty 0 4
  password cisco
  login
  transport input ssh

! Chiffrement des mots de passe
service password-encryption
banner motd #Accès non autorisé interdit#

! Configuration des interfaces
interface g0/0/0
  description Lien vers LAN
  ip address 192.168.1.1 255.255.255.0
  no shutdown

interface g0/0/1
  description Lien vers WAN
  ip address 10.0.0.1 255.255.255.252
  no shutdown

! Sauvegarder
end
copy running-config startup-config</code></pre>
                </div>

                <h3>Types de Routage</h3>
                <table style="width: 100%; border-collapse: collapse; margin: 1rem 0;">
                    <thead>
                        <tr style="background: var(--gradient-primary); color: white;">
                            <th style="padding: 12px; text-align: left;">Type</th>
                            <th style="padding: 12px; text-align: left;">Description</th>
                            <th style="padding: 12px; text-align: left;">Avantages</th>
                            <th style="padding: 12px; text-align: left;">Inconvénients</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="background: var(--bg-card);">
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">
                                <strong>Statique</strong>
                            </td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">Routes configurées
                                manuellement</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">Simple, sécurisé,
                                pas de bande passante utilisée</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">Pas de mise à jour
                                automatique, ne scale pas</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px;"><strong>Dynamique</strong></td>
                            <td style="padding: 12px;">Routes apprises automatiquement</td>
                            <td style="padding: 12px;">S'adapte aux changements, scalable</td>
                            <td style="padding: 12px;">Utilise CPU/bande passante, plus complexe</td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- Section 2: Table de Routage -->
            <section class="section" id="table-routage">
                <h2>Table de Routage</h2>

                <p>La <strong>table de routage</strong> contient toutes les informations nécessaires pour prendre des
                    décisions de routage. Chaque entrée contient le réseau de destination, le masque, le next-hop (ou
                    l'interface de sortie) et la métrique.</p>

                <h3>Lecture d'une Table de Routage</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">Cisco IOS - Exemple de table de routage</span>
                        <button class="code-copy-btn"><i class="fas fa-copy"></i> Copier</button>
                    </div>
                    <pre><code>R1# show ip route

Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
       E1 - OSPF external type 1, E2 - OSPF external type 2
       i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2
       * - candidate default

Gateway of last resort is 10.0.0.2 to network 0.0.0.0

      10.0.0.0/8 is variably subnetted, 2 subnets, 2 masks
C        10.0.0.0/30 is directly connected, GigabitEthernet0/0/1
L        10.0.0.1/32 is directly connected, GigabitEthernet0/0/1
O     172.16.0.0/16 [110/20] via 10.0.0.2, 00:05:23, GigabitEthernet0/0/1
      192.168.1.0/24 is variably subnetted, 2 subnets, 2 masks
C        192.168.1.0/24 is directly connected, GigabitEthernet0/0/0
L        192.168.1.1/32 is directly connected, GigabitEthernet0/0/0
S     192.168.2.0/24 [1/0] via 10.0.0.2
S*    0.0.0.0/0 [1/0] via 10.0.0.2</code></pre>
                </div>

                <h3>Codes de la Table de Routage</h3>
                <ul>
                    <li><strong>C (Connected)</strong> : Réseau directement connecté à une interface</li>
                    <li><strong>L (Local)</strong> : Adresse IP de l'interface elle-même (/32)</li>
                    <li><strong>S (Static)</strong> : Route statique configurée manuellement</li>
                    <li><strong>S* (Static Default)</strong> : Route par défaut statique</li>
                    <li><strong>O (OSPF)</strong> : Route apprise via OSPF</li>
                    <li><strong>D (EIGRP)</strong> : Route apprise via EIGRP</li>
                    <li><strong>R (RIP)</strong> : Route apprise via RIP</li>
                </ul>

                <h3>Distance Administrative (AD)</h3>
                <p>Quand plusieurs sources proposent une route vers la même destination, le routeur choisit celle avec
                    la <strong>distance administrative la plus basse</strong>.</p>

                <table style="width: 100%; border-collapse: collapse; margin: 1rem 0;">
                    <thead>
                        <tr style="background: var(--gradient-primary); color: white;">
                            <th style="padding: 12px; text-align: left;">Source de Route</th>
                            <th style="padding: 12px; text-align: left;">Distance Administrative</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="background: var(--bg-card);">
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">Directly Connected
                            </td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">0</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">Static Route</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">1</td>
                        </tr>
                        <tr style="background: var(--bg-card);">
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">EIGRP Summary</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">5</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">eBGP</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">20</td>
                        </tr>
                        <tr style="background: var(--bg-card);">
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">EIGRP (internal)
                            </td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">90</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">OSPF</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">110</td>
                        </tr>
                        <tr style="background: var(--bg-card);">
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">IS-IS</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">115</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">RIP</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">120</td>
                        </tr>
                        <tr style="background: var(--bg-card);">
                            <td style="padding: 12px;">Unknown/Unreachable</td>
                            <td style="padding: 12px;">255</td>
                        </tr>
                    </tbody>
                </table>

                <div class="alert alert-warning">
                    <div class="alert-icon"><i class="fas fa-lightbulb"></i></div>
                    <div class="alert-content">
                        <div class="alert-title">Métrique vs Distance Administrative</div>
                        <p style="margin: 0;"><strong>AD</strong> = pour choisir entre protocoles différents (OSPF vs
                            EIGRP).<br>
                            <strong>Métrique</strong> = pour choisir entre routes d'un même protocole (OSPF cost).
                        </p>
                    </div>
                </div>
            </section>

            <!-- Section 3: Routage Statique -->
            <section class="section" id="routage-statique">
                <h2>Routage Statique</h2>

                <p>Les routes statiques sont configurées manuellement par l'administrateur. Elles sont idéales pour les
                    petits réseaux, les routes stub, ou comme route par défaut.</p>

                <h3>Syntaxe des Routes Statiques</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">Cisco IOS - Routes statiques</span>
                        <button class="code-copy-btn"><i class="fas fa-copy"></i> Copier</button>
                    </div>
                    <pre><code>! Syntaxe générale
ip route [réseau-destination] [masque] [next-hop | interface-sortie] [AD]

! Route vers un réseau via next-hop IP
ip route 192.168.2.0 255.255.255.0 10.0.0.2

! Route via interface de sortie (point-to-point uniquement)
ip route 192.168.2.0 255.255.255.0 Serial0/0/0

! Route fully specified (next-hop + interface)
ip route 192.168.2.0 255.255.255.0 GigabitEthernet0/0/1 10.0.0.2

! Route par défaut (Gateway of Last Resort)
ip route 0.0.0.0 0.0.0.0 10.0.0.2

! Route avec AD modifiée (route flottante)
ip route 192.168.2.0 255.255.255.0 10.0.0.2 150</code></pre>
                </div>

                <h3>Types de Routes Statiques</h3>
                <ul>
                    <li><strong>Route standard</strong> : Vers un réseau spécifique</li>
                    <li><strong>Route par défaut</strong> : 0.0.0.0/0 - Route vers "tout le reste"</li>
                    <li><strong>Route hôte</strong> : Vers une adresse IP unique (/32)</li>
                    <li><strong>Route flottante</strong> : Backup avec AD plus élevée</li>
                    <li><strong>Route récapitulative</strong> : Agrège plusieurs routes en une seule</li>
                </ul>

                <h3>Route Flottante (Floating Static Route)</h3>
                <p>Une route flottante sert de <strong>backup</strong>. Elle n'est utilisée que si la route principale
                    disparaît.</p>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">Cisco IOS - Route flottante</span>
                        <button class="code-copy-btn"><i class="fas fa-copy"></i> Copier</button>
                    </div>
                    <pre><code>! Route principale via le lien principal (AD par défaut = 1)
ip route 192.168.2.0 255.255.255.0 10.0.0.2

! Route flottante via lien de backup (AD = 150)
! Cette route ne sera utilisée que si la première devient indisponible
ip route 192.168.2.0 255.255.255.0 10.0.1.2 150</code></pre>
                </div>

                <h3>Vérification des Routes Statiques</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">Cisco IOS - Vérification</span>
                        <button class="code-copy-btn"><i class="fas fa-copy"></i> Copier</button>
                    </div>
                    <pre><code>! Afficher la table de routage
show ip route

! Afficher uniquement les routes statiques
show ip route static

! Afficher une route spécifique
show ip route 192.168.2.0

! Vérifier la configuration
show running-config | include ip route</code></pre>
                </div>
            </section>

            <!-- Section 4: OSPF Concepts -->
            <section class="section" id="ospf-concepts">
                <h2>OSPF : Concepts</h2>

                <p><strong>OSPF</strong> (Open Shortest Path First) est un protocole de routage à <strong>état de
                        lien</strong> (Link-State) standardisé (IEEE). C'est le protocole IGP le plus utilisé en
                    entreprise.</p>

                <h3>Caractéristiques OSPF</h3>
                <ul>
                    <li><strong>Type</strong> : Link-State (vs Distance Vector comme RIP)</li>
                    <li><strong>Algorithme</strong> : Dijkstra (SPF - Shortest Path First)</li>
                    <li><strong>Métrique</strong> : Cost (basé sur la bande passante)</li>
                    <li><strong>Distance Administrative</strong> : 110</li>
                    <li><strong>Mises à jour</strong> : Incrémentales (seulement les changements)</li>
                    <li><strong>Convergence</strong> : Rapide</li>
                    <li><strong>Support VLSM/CIDR</strong> : Oui (classless)</li>
                </ul>

                <h3>Terminologie OSPF</h3>
                <table style="width: 100%; border-collapse: collapse; margin: 1rem 0;">
                    <thead>
                        <tr style="background: var(--gradient-primary); color: white;">
                            <th style="padding: 12px; text-align: left;">Terme</th>
                            <th style="padding: 12px; text-align: left;">Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="background: var(--bg-card);">
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);"><strong>Router
                                    ID</strong></td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">Identifiant unique
                                du routeur (format IP). Choisi : 1) Manuellement 2) Plus haute IP loopback 3) Plus haute
                                IP active</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">
                                <strong>Area</strong>
                            </td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">Zone logique
                                regroupant des routeurs. Area 0 = backbone (obligatoire)</td>
                        </tr>
                        <tr style="background: var(--bg-card);">
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">
                                <strong>LSA</strong>
                            </td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">Link State
                                Advertisement - Messages décrivant les liens</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">
                                <strong>LSDB</strong>
                            </td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">Link State Database
                                - Base de données contenant tous les LSAs</td>
                        </tr>
                        <tr style="background: var(--bg-card);">
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">
                                <strong>Neighbor</strong>
                            </td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">Routeur OSPF
                                adjacent avec qui on échange des informations</td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">
                                <strong>DR/BDR</strong>
                            </td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">Designated Router /
                                Backup DR - Élus sur les réseaux multi-accès</td>
                        </tr>
                        <tr style="background: var(--bg-card);">
                            <td style="padding: 12px;"><strong>Cost</strong></td>
                            <td style="padding: 12px;">Métrique = Reference Bandwidth / Interface Bandwidth</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Calcul du Cost OSPF</h3>
                <p>Par défaut, la référence est 100 Mbps. Donc :</p>
                <ul>
                    <li><strong>10 Mbps</strong> : 100/10 = <strong>10</strong></li>
                    <li><strong>100 Mbps</strong> : 100/100 = <strong>1</strong></li>
                    <li><strong>1 Gbps</strong> : 100/1000 = <strong>1</strong> (problème !)</li>
                    <li><strong>10 Gbps</strong> : 100/10000 = <strong>1</strong> (problème !)</li>
                </ul>

                <div class="alert alert-warning">
                    <div class="alert-icon"><i class="fas fa-triangle-exclamation"></i></div>
                    <div class="alert-content">
                        <div class="alert-title">Augmenter la reference bandwidth !</div>
                        <p style="margin: 0;">Pour les réseaux modernes avec du Gigabit/10Gig, configurez une référence
                            plus élevée pour différencier les liens :<br>
                            <code>auto-cost reference-bandwidth 10000</code> (pour 10 Gbps)
                        </p>
                    </div>
                </div>

                <h3>États des Neighbors OSPF</h3>
                <ol>
                    <li><strong>Down</strong> : Pas de Hello reçu</li>
                    <li><strong>Init</strong> : Hello reçu, mais pas bidirectionnel</li>
                    <li><strong>2-Way</strong> : Communication bidirectionnelle établie (élection DR/BDR ici)</li>
                    <li><strong>ExStart</strong> : Négociation du master/slave pour DBD</li>
                    <li><strong>Exchange</strong> : Échange des DBD (Database Description)</li>
                    <li><strong>Loading</strong> : Demande et réception des LSAs manquants</li>
                    <li><strong>Full</strong> : Adjacence établie, LSDB synchronisée</li>
                </ol>

                <h3>Hello et Dead Timers</h3>
                <ul>
                    <li><strong>Réseau broadcast/point-to-point</strong> : Hello = 10s, Dead = 40s</li>
                    <li><strong>Réseau NBMA</strong> : Hello = 30s, Dead = 120s</li>
                </ul>
                <p>Les timers doivent correspondre entre neighbors pour former une adjacence !</p>
            </section>

            <!-- Section 5: OSPF Configuration -->
            <section class="section" id="ospf-config">
                <h2>OSPF : Configuration</h2>

                <h3>Configuration Single-Area OSPF</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">Cisco IOS - Configuration OSPF</span>
                        <button class="code-copy-btn"><i class="fas fa-copy"></i> Copier</button>
                    </div>
                    <pre><code>! Activer OSPF avec un process ID (local au routeur)
router ospf 1

! Configurer le Router ID (recommandé)
router-id 1.1.1.1

! Annoncer les réseaux (avec wildcard mask)
! Wildcard = inverse du subnet mask (255.255.255.0 → 0.0.0.255)
network 192.168.1.0 0.0.0.255 area 0
network 10.0.0.0 0.0.0.3 area 0

! Alternative : annoncer une interface spécifique
network 192.168.1.1 0.0.0.0 area 0

! Définir les interfaces passives (pas d'envoi/réception OSPF)
passive-interface g0/0/0

! Définir toutes les interfaces passives par défaut
passive-interface default
no passive-interface g0/0/1

! Propager la route par défaut
default-information originate

! Modifier la reference bandwidth (pour Gigabit+)
auto-cost reference-bandwidth 10000

! Configurer une interface loopback pour le Router ID
interface loopback 0
  ip address 1.1.1.1 255.255.255.255</code></pre>
                </div>

                <h3>Configuration par Interface (Méthode moderne)</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">Cisco IOS - OSPF par interface</span>
                        <button class="code-copy-btn"><i class="fas fa-copy"></i> Copier</button>
                    </div>
                    <pre><code>! Activer OSPF sur une interface spécifique
interface g0/0/0
  ip ospf 1 area 0
  
interface g0/0/1
  ip ospf 1 area 0

! Configurer le cost manuellement
interface g0/0/1
  ip ospf cost 100

! Configurer la priorité DR/BDR (défaut: 1)
interface g0/0/1
  ip ospf priority 100

! Modifier les timers (attention: doit correspondre des 2 côtés!)
interface g0/0/1
  ip ospf hello-interval 5
  ip ospf dead-interval 20</code></pre>
                </div>

                <h3>Élection DR/BDR</h3>
                <p>Sur les réseaux multi-accès (Ethernet), un <strong>DR</strong> (Designated Router) et un
                    <strong>BDR</strong> (Backup DR) sont élus pour réduire le nombre d'adjacences.
                </p>
                <p>L'élection se base sur :</p>
                <ol>
                    <li><strong>Priorité OSPF</strong> la plus haute (défaut: 1, range: 0-255)</li>
                    <li><strong>Router ID</strong> le plus haut (en cas d'égalité)</li>
                </ol>
                <p><strong>Priorité 0</strong> = ne peut pas devenir DR/BDR</p>

                <div class="alert alert-info">
                    <div class="alert-icon"><i class="fas fa-lightbulb"></i></div>
                    <div class="alert-content">
                        <div class="alert-title">L'élection DR n'est pas préemptive</div>
                        <p style="margin: 0;">Même si un routeur avec une meilleure priorité arrive, le DR actuel reste
                            en place. Pour forcer une nouvelle élection, redémarrez le processus OSPF :
                            <code>clear ip ospf process</code>
                        </p>
                    </div>
                </div>
            </section>

            <!-- Section 6: OSPF Vérification -->
            <section class="section" id="ospf-verification">
                <h2>OSPF : Vérification</h2>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">Cisco IOS - Commandes de vérification OSPF</span>
                        <button class="code-copy-btn"><i class="fas fa-copy"></i> Copier</button>
                    </div>
                    <pre><code>! Afficher les voisins OSPF
show ip ospf neighbor

! Exemple de sortie:
! Neighbor ID     Pri   State       Dead Time   Address        Interface
! 2.2.2.2          1   FULL/DR     00:00:38    10.0.0.2       Gi0/0/1

! Afficher la configuration OSPF
show ip protocols

! Afficher les informations OSPF sur les interfaces
show ip ospf interface
show ip ospf interface brief

! Afficher la base de données OSPF
show ip ospf database

! Afficher les routes OSPF dans la table de routage
show ip route ospf

! Debug OSPF (attention en production!)
debug ip ospf hello
debug ip ospf adj
undebug all</code></pre>
                </div>

                <h3>Interpréter show ip ospf neighbor</h3>
                <ul>
                    <li><strong>Neighbor ID</strong> : Router ID du voisin</li>
                    <li><strong>Pri</strong> : Priorité DR du voisin</li>
                    <li><strong>State</strong> : État de l'adjacence (FULL = OK)</li>
                    <li><strong>Dead Time</strong> : Temps restant avant de déclarer le voisin mort</li>
                    <li><strong>Address</strong> : Adresse IP de l'interface du voisin</li>
                    <li><strong>Interface</strong> : Interface locale vers ce voisin</li>
                </ul>

                <div class="alert alert-success">
                    <div class="alert-icon"><i class="fas fa-check-circle"></i></div>
                    <div class="alert-content">
                        <div class="alert-title">Adjacence réussie</div>
                        <p style="margin: 0;">L'état <strong>FULL/DR</strong> ou <strong>FULL/BDR</strong> ou
                            <strong>FULL/-</strong> indique une adjacence pleinement établie.
                            <strong>2WAY/DROTHER</strong> est normal entre deux routeurs non-DR sur un réseau
                            multi-accès.
                        </p>
                    </div>
                </div>
            </section>

            <!-- Section 7: Troubleshooting -->
            <section class="section" id="troubleshooting">
                <h2>Troubleshooting Routage</h2>

                <h3>Problèmes courants OSPF</h3>
                <table style="width: 100%; border-collapse: collapse; margin: 1rem 0;">
                    <thead>
                        <tr style="background: var(--gradient-primary); color: white;">
                            <th style="padding: 12px; text-align: left;">Symptôme</th>
                            <th style="padding: 12px; text-align: left;">Causes possibles</th>
                            <th style="padding: 12px; text-align: left;">Vérification</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="background: var(--bg-card);">
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">Pas de neighbor
                            </td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">Interface down, ACL
                                bloquant, mauvais réseau</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">
                                <code>show ip ospf interface</code>
                            </td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">Neighbor bloqué
                                Init</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">Hello non reçu en
                                retour (ACL, problème L2)</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">
                                <code>debug ip ospf hello</code>
                            </td>
                        </tr>
                        <tr style="background: var(--bg-card);">
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">Timers mismatch
                            </td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">Hello/Dead
                                intervals différents</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">
                                <code>show ip ospf interface</code>
                            </td>
                        </tr>
                        <tr>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">Area mismatch</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">Areas différentes
                                configurées</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border-color);">
                                <code>show ip protocols</code>
                            </td>
                        </tr>
                        <tr style="background: var(--bg-card);">
                            <td style="padding: 12px;">Subnet mask mismatch</td>
                            <td style="padding: 12px;">Masques différents sur le même lien</td>
                            <td style="padding: 12px;"><code>show ip interface brief</code></td>
                        </tr>
                    </tbody>
                </table>

                <h3>Méthodologie de Troubleshooting</h3>
                <ol>
                    <li><strong>Vérifier la connectivité L1/L2</strong> : <code>show interfaces status</code>,
                        <code>show ip interface brief</code>
                    </li>
                    <li><strong>Vérifier les adresses IP</strong> : Sont-elles dans le même sous-réseau ?</li>
                    <li><strong>Vérifier OSPF actif</strong> : <code>show ip protocols</code>,
                        <code>show ip ospf interface</code>
                    </li>
                    <li><strong>Vérifier les neighbors</strong> : <code>show ip ospf neighbor</code></li>
                    <li><strong>Vérifier la table de routage</strong> : <code>show ip route</code></li>
                    <li><strong>Tester la connectivité</strong> : <code>ping</code>, <code>traceroute</code></li>
                </ol>
            </section>

            <!-- Section 8: Labs -->
            <section class="section" id="labs">
                <h2>Labs Pratiques</h2>

                <div class="card" style="margin-bottom: 1.5rem;">
                    <h3><i class="fas fa-microscope"></i> Lab 1 : Routes Statiques</h3>
                    <p><strong>Objectif :</strong> Configurer un réseau avec routes statiques</p>
                    <p><strong>Topologie :</strong> 3 routeurs en ligne (R1 -- R2 -- R3)</p>
                    <ol>
                        <li>Configurer les interfaces de chaque routeur</li>
                        <li>Sur R1 : route statique vers le LAN de R3 via R2</li>
                        <li>Sur R3 : route par défaut vers R2</li>
                        <li>Vérifier avec ping et traceroute</li>
                    </ol>
                </div>

                <div class="card" style="margin-bottom: 1.5rem;">
                    <h3><i class="fas fa-microscope"></i> Lab 2 : OSPF Single-Area (Lab 2.7.2)</h3>
                    <p><strong>Objectif :</strong> Configurer OSPF single-area sur plusieurs routeurs</p>
                    <p><strong>Topologie :</strong> 3 routeurs en triangle + LANs</p>
                    <ol>
                        <li>Configurer les Router IDs avec loopbacks</li>
                        <li>Activer OSPF et annoncer tous les réseaux dans Area 0</li>
                        <li>Configurer les interfaces LAN comme passives</li>
                        <li>Modifier la reference bandwidth pour 10 Gbps</li>
                        <li>Vérifier les adjacences avec <code>show ip ospf neighbor</code></li>
                        <li>Vérifier la table de routage</li>
                        <li>Tester la redondance : débrancher un lien et observer la reconvergence</li>
                    </ol>
                </div>

                <div class="card" style="margin-bottom: 1.5rem;">
                    <h3><i class="fas fa-microscope"></i> Lab 3 : Route par défaut OSPF</h3>
                    <p><strong>Objectif :</strong> Propager une route par défaut via OSPF</p>
                    <ol>
                        <li>Configurer R1 comme routeur de bordure avec accès "Internet"</li>
                        <li>Créer une route statique par défaut sur R1</li>
                        <li>Propager la route par défaut avec <code>default-information originate</code></li>
                        <li>Vérifier que tous les routeurs ont reçu la route par défaut</li>
                    </ol>
                </div>

                <div class="card" style="margin-bottom: 1.5rem;">
                    <h3><i class="fas fa-microscope"></i> Lab 4 : Élection DR/BDR</h3>
                    <p><strong>Objectif :</strong> Contrôler l'élection DR/BDR</p>
                    <ol>
                        <li>Connecter 3 routeurs sur un même segment Ethernet</li>
                        <li>Observer l'élection par défaut (basée sur Router ID)</li>
                        <li>Configurer R1 avec priorité 100 pour devenir DR</li>
                        <li>Configurer R2 avec priorité 50 pour devenir BDR</li>
                        <li>Configurer R3 avec priorité 0 (jamais DR)</li>
                        <li>Redémarrer OSPF et vérifier l'élection</li>
                    </ol>
                </div>
            </section>

            <!-- Section 9: Quiz -->
            <section class="section" id="quiz">
                <h2><i class="fas fa-flask"></i> Quiz de vérification</h2>

                <div id="quiz-container" data-phase="phase3">
                    <div style="text-align: center; padding: 2rem;">
                        <p><i class="fas fa-spinner fa-spin"></i> Chargement du quiz...</p>
                    </div>
                </div>
            </section>

            <!-- Planning -->
            <section class="section">
                <h2>Planning Suggéré</h2>
                <div class="timeline">
                    <div class="timeline-item">
                        <div class="timeline-title">Semaine 1 : Routage Statique</div>
                        <div class="timeline-content">Comprendre la table de routage + Configurer routes statiques et
                            par défaut</div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-title">Semaine 2 : Théorie OSPF</div>
                        <div class="timeline-content">Concepts OSPF: areas, LSA, DR/BDR, états des neighbors, calcul du
                            cost</div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-title">Semaine 3 : Configuration OSPF</div>
                        <div class="timeline-content">Labs OSPF single-area + Commandes de vérification</div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-title">Semaine 4 : OSPF Avancé</div>
                        <div class="timeline-content">Optimisation OSPF, route par défaut, référence bandwidth</div>
                    </div>
                    <div class="timeline-item">
                        <div class="timeline-title">Semaine 5 : Troubleshooting</div>
                        <div class="timeline-content">Diagnostic et résolution de problèmes + Lab 2.7.2 complet</div>
                    </div>
                </div>
            </section>

            <!-- Page Navigation -->

            <!-- Completion Section -->
            <div class="completion-section"
                style="margin: 4rem 0; padding: 2rem; background: var(--bg-card); border-radius: var(--radius-lg); border: 1px solid var(--border-color); text-align: center;">
                <h3 style="margin-bottom: 1rem;">La phase est terminée ?</h3>
                <p style="margin-bottom: 2rem; color: var(--text-secondary);">Marquez cette phase comme terminée pour
                    suivre votre progression globale.</p>
                <button class="mark-complete-btn" data-phase="phase3"
                    style="margin: 0 auto; width: auto; font-size: 1.1rem; padding: 0.75rem 2rem;">Marquer la phase
                    comme terminée</button>
            </div>

            <nav class="page-nav">
                <a href="phase2-commutation.html" class="page-nav-link prev">
                    <span>←</span>
                    <div>
                        <div class="page-nav-label">Précédent</div>
                        <div class="page-nav-title">Phase 2 : Commutation</div>
                    </div>
                </a>
                <a href="phase4-inter-vlan.html" class="page-nav-link">
                    <div>
                        <div class="page-nav-label">Suivant</div>
                        <div class="page-nav-title">Phase 4 : Inter-VLAN</div>
                    </div>
                    <span>→</span>
                </a>
            </nav>
        </div>
    </main>

    <footer class="footer">
        <div class="footer-content">
            <p class="footer-text">Programme de Formation en Routage et Commutation • Préparation CCNA 200-301</p>
        </div>
    </footer>
    <script src="../js/quiz_data.js"></script>
    <script src="../js/quiz.js"></script>
    <script src="../js/main.js"></script>
</body>

</html>